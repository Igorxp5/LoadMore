/* Load More - Plugin for load more after
 * 
 * Version:  1.1
 *
 */
"use strict";function classLm(){this.i=lm.i}Element.prototype.loadMore=function(e){return"object"==typeof e?(lm.init(this,e),new classLm):void lm.clError("The parameters must be object.")};var lm={c:{data:"",itemsInit:1,itemsPerLoad:1,elementForLoad:"",baseElement:"",minDelay:1e3,onClickForLoad:function(){},onLoad:function(){},onCompleted:function(){}},i:{data:"",attributeForKeys:"data-loadmore",replacer:"{{@%s%}}",getJSON:function(e,t,n){var r="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.open("get",e,!0),r.onreadystatechange=function(){var e,o;4==r.readyState&&(e=r.status,200==e?(o=JSON.parse(r.responseText),t&&t(o)):n&&n(e))},r.send()}},sF:{search:function(e,t){if(!(Object.keys(t).length>0))return e;var n=[];for(var r in e){var o=e[r],l=0;for(var a in t){if(o[a]!=t[a])break;l++,l==Object.keys(t).length&&n.push(o)}}return 0==n.length?-1:n},severalSplice:function(e,t){var n=e;for(var r in t){var o=n.indexOf(t[r]);-1!=o&&n.splice(o,1)}return n}},init:function(e,t){if(lm.c.el=e,t)for(var n in t)lm.c.hasOwnProperty(n)&&(lm.c[n]=t[n]);lm.adjustmentsInVar(),lm.createBaseElement(),"object"==lm.c.data?(lm.i.data=lm.c.data,lm.initConfigs()):lm.getArray()},adjustmentsInVar:function(){if("string"==typeof lm.c.elementForLoad&&""!=lm.c.elementForLoad&&(lm.c.elementForLoad=document.querySelector(lm.c.elementForLoad),lm.c.elementForLoad||lm.clError("The element setted to 'elementForLoad' doesn't exist.")),"number"!=typeof lm.c.minDelay&&lm.clError("The minDelay property must be of number type."),"string"!=typeof lm.c.baseElement&&"object"!=typeof lm.c.baseElement&&(lm.c.baseElement||lm.clError("The element to 'baseElement' wasn't setted.")),"string"==typeof lm.c.baseElement&&(lm.c.baseElement=document.querySelector(lm.c.baseElement),lm.c.baseElement||lm.clError("The element setted to 'baseElement' doesn't exist.")),"number"!=typeof lm.c.itemsInit&&lm.clError("The itemsInit property must be of number type."),"number"!=typeof lm.c.itemsPerLoad&&lm.clError("The itemsPerLoad property must be of number type."),"string"!=typeof lm.c.data&&"object"!=typeof lm.c.data&&lm.clError("The data property must be of number type or string type(url)."),-1==lm.c.data.search("http")){var e=document.location;lm.c.data=e+"/"+lm.c.data}},initConfigs:function(){lm.loadMore({},lm.c.itemsInit),lm.insertOns()},getArray:function(){lm.i.getJSON(lm.c.data,function(e){lm.i.data=e,lm.initConfigs()},function(){lm.clError("Couldn't get the data of the file: "+lm.c.data)})},createBaseElement:function(){lm.i.baseElement=lm.c.baseElement.cloneNode(!0),lm.i.baseElement.removeAttribute("id"),lm.c.baseElement.remove()},insertNewValuesOnHTML:function(e){lm.c.el.innerHTML+=e,0==this.i.remainderData.length&&lm.c.onCompleted()},insertOns:function(){return lm.c.elementForLoad&&""!=lm.c.elementForLoad?void(lm.c.elementForLoad.onclick=function(){lm.loadMore(),lm.c.onClickForLoad()}):!1},loadMore:function(e,t,n,r){var o=void 0==this.i.remainderData?this.i.data:this.i.remainderData,l=document.createElement("div");if(void 0==o||"object"!=typeof o)return!1;if(0==o.length)return!1;(void 0==e||"object"!=typeof e)&&(e={}),(void 0==t||"number"!=typeof t)&&(t=lm.c.itemsPerLoad),(void 0==n||"object"!=typeof n)&&(n=lm.c.localInput),(void 0==r||"number"!=typeof r)&&(r=lm.c.minDelay);var a;if(Object.keys(e).length>0){var m=lm.sF.search(o,e);a=-1!=m?m:o}else a=o;for(var i=[],c=0;t>c;c++){var s=a[c];i.push(s);var d=this.i.replacer.split("%s%"),u=lm.i.baseElement.cloneNode(!0),f=u.innerHTML,p=u.attributes;for(var b in s){var h=d[0]+b+d[1];f=f.replace(h,s[b]);for(var y=0;y<p.length;y++){var v=p[y].nodeName,E=p[y].value;-1!=E.search(h)&&u.setAttribute(v,s[b])}}u.innerHTML=f,l.appendChild(u)}this.i.remainderData=lm.sF.severalSplice(o,i),setTimeout(function(){lm.insertNewValuesOnHTML(l.innerHTML,a.length),lm.c.onLoad()},r)},clError:function(e){throw new Error("loadMore - "+e)}};classLm.prototype.loadMore=function(e,t,n,r){"object"!=typeof this.i.data?this.i.getJSON(this.i.data,function(o){this.i.data=o,lm.loadMore(e,t,n,r)},function(){console.error("loadMore - Couldn't get the data of the file: "+this.i.data)}):lm.loadMore(e,t,n,r)};