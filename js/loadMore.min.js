/* Load More - Plugin for load more after
 * 
 * Version:  1.2
 *
 */
"use strict";function classLm(){this.i=lm.i}Element.prototype.loadMore=function(e){return"object"==typeof e?(lm.init(this,e),new classLm):void lm.clError("The parameters must be object.")};var lm={c:{data:"",itemsInit:1,itemsPerLoad:1,elementForLoad:"",baseElement:"",minDelay:1e3,onClickForLoad:function(){},onLoad:function(){},onCompleted:function(){}},i:{data:"",attributeForKeys:"data-loadmore",replacer:"{{@%s%}}",getJSON:function(e,t,n){var o="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("get",e,!0),o.onreadystatechange=function(){var e,r;4==o.readyState&&(e=o.status,200==e?(r=JSON.parse(o.responseText),t&&t(r)):n&&n(e))},o.send()}},sF:{search:function(e,t){if(!(Object.keys(t).length>0))return e;var n=[];for(var o in e){var r=e[o],l=0;for(var a in t){if(r[a]!=t[a])break;l++,l==Object.keys(t).length&&n.push(r)}}return 0==n.length?-1:n},severalSplice:function(e,t){var n=e;for(var o in t){var r=n.indexOf(t[o]);-1!=r&&n.splice(r,1)}return n}},init:function(e,t){if(lm.c.el=e,t)for(var n in t)lm.c.hasOwnProperty(n)&&(lm.c[n]=t[n]);lm.adjustmentsInVar(),lm.createBaseElement(),"object"==lm.c.data?(lm.i.data=lm.c.data,lm.initConfigs()):lm.getArray()},adjustmentsInVar:function(){if("string"==typeof lm.c.elementForLoad&&""!=lm.c.elementForLoad&&(lm.c.elementForLoad=document.querySelector(lm.c.elementForLoad),lm.c.elementForLoad||lm.clError("The element setted to 'elementForLoad' doesn't exist.")),"number"!=typeof lm.c.minDelay&&lm.clError("The minDelay property must be of number type."),"string"!=typeof lm.c.baseElement&&"object"!=typeof lm.c.baseElement&&(lm.c.baseElement||lm.clError("The element to 'baseElement' wasn't setted.")),"string"==typeof lm.c.baseElement&&(lm.c.baseElement=document.querySelector(lm.c.baseElement),lm.c.baseElement||lm.clError("The element setted to 'baseElement' doesn't exist.")),"number"!=typeof lm.c.itemsInit&&lm.clError("The itemsInit property must be of number type."),"number"!=typeof lm.c.itemsPerLoad&&lm.clError("The itemsPerLoad property must be of number type."),"string"!=typeof lm.c.data&&"object"!=typeof lm.c.data&&lm.clError("The data property must be of number type or string type(url)."),"object"!=typeof lm.c.data&&-1==lm.c.data.search("http")){var e=document.location;lm.c.data=e+"/"+lm.c.data}},initConfigs:function(){lm.loadMore({},lm.c.itemsInit),lm.insertOns()},getArray:function(){return"object"==typeof lm.c.data?(lm.i.data=lm.c.data,lm.initConfigs(),!0):void lm.i.getJSON(lm.c.data,function(e){lm.i.data=e,lm.initConfigs()},function(){lm.clError("Couldn't get the data of the file: "+lm.c.data)})},createBaseElement:function(){lm.i.baseElement=lm.c.baseElement.cloneNode(!0),lm.i.baseElement.removeAttribute("id"),lm.c.baseElement.remove()},insertNewValuesOnHTML:function(e){lm.c.el.innerHTML+=e,0==this.i.remainderData.length&&lm.c.onCompleted()},insertOns:function(){return lm.c.elementForLoad&&""!=lm.c.elementForLoad?void(lm.c.elementForLoad.onclick=function(){lm.loadMore(),lm.c.onClickForLoad()}):!1},loadMore:function(e,t,n,o){var r=void 0==this.i.remainderData?this.i.data:this.i.remainderData,l=document.createElement("div");if(void 0==r||"object"!=typeof r)return!1;if(0==r.length)return!1;(void 0==e||"object"!=typeof e)&&(e={}),(void 0==t||"number"!=typeof t)&&(t=lm.c.itemsPerLoad),(void 0==n||"object"!=typeof n)&&(n=lm.c.localInput),(void 0==o||"number"!=typeof o)&&(o=lm.c.minDelay);var a;if(Object.keys(e).length>0){var i=lm.sF.search(r,e);a=-1!=i?i:{}}else a=r;if(0==Object.keys(a).length)return!1;for(var m=[],c=0;t>c;c++){var s=a[c];m.push(s);var d=this.i.replacer.split("%s%"),u=lm.i.baseElement.cloneNode(!0),f=u.innerHTML,p=u.attributes;for(var b in s){var y=d[0]+b+d[1];f=f.replace(new RegExp(y,"g"),s[b]);for(var h=0;h<p.length;h++){var v=p[h].nodeName,E=p[h].value;-1!=E.search(y)&&u.setAttribute(v,s[b])}}u.innerHTML=f,l.appendChild(u)}this.i.remainderData=lm.sF.severalSplice(r,m),setTimeout(function(){lm.insertNewValuesOnHTML(l.innerHTML,a.length),lm.c.onLoad()},o)},clError:function(e){throw new Error("loadMore - "+e)}};classLm.prototype.loadMore=function(e,t,n,o){"object"!=typeof this.i.data?this.i.getJSON(this.i.data,function(r){this.i.data=r,lm.loadMore(e,t,n,o)},function(){console.error("loadMore - Couldn't get the data of the file: "+this.i.data)}):lm.loadMore(e,t,n,o)};