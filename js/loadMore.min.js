/* Load More - Plugin for load more after
 * 
 * Version:  1.3
 *
 */
"use strict";function classLm(){this.i=lm.i}Element.prototype.loadMore=function(e){return"object"==typeof e?(lm.init(this,e),new classLm):void lm.clError("The parameters must be object.")};var lm={c:{data:"",itemsInit:1,itemsPerLoad:1,elementForLoad:"",baseElement:"",autoAddition:!0,minDelay:1e3,onClickForLoad:function(){},onLoad:function(){},onCompleted:function(){}},i:{data:"",attributeForKeys:"data-loadmore",replacer:"{{@%s%}}",getJSON:function(e,t,n){var o="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("get",e,!0),o.onreadystatechange=function(){var e,r;4==o.readyState&&(e=o.status,200==e?(r=JSON.parse(o.responseText),t&&t(r)):n&&n(e))},o.send()}},sF:{search:function(e,t){if(!(Object.keys(t).length>0))return e;var n=[];for(var o in e){var r=e[o],l=0;for(var a in t){if(r[a]!=t[a])break;l++,l==Object.keys(t).length&&n.push(r)}}return 0==n.length?-1:n},severalSplice:function(e,t){var n=e;for(var o in t){var r=n.indexOf(t[o]);-1!=r&&n.splice(r,1)}return n}},init:function(e,t){if(lm.c.el=e,t)for(var n in t)lm.c.hasOwnProperty(n)&&(lm.c[n]=t[n]);lm.adjustmentsInVar(),lm.createBaseElement(),"object"==lm.c.data?(lm.i.data=lm.c.data,lm.initConfigs()):lm.getArray()},adjustmentsInVar:function(){if("string"==typeof lm.c.elementForLoad&&""!=lm.c.elementForLoad&&(lm.c.elementForLoad=document.querySelector(lm.c.elementForLoad),lm.c.elementForLoad||lm.clError("The element setted to 'elementForLoad' doesn't exist.")),"number"!=typeof lm.c.minDelay&&lm.clError("The minDelay property must be of number type."),"string"!=typeof lm.c.baseElement&&"object"!=typeof lm.c.baseElement&&(lm.c.baseElement||lm.clError("The element to 'baseElement' wasn't setted.")),"string"==typeof lm.c.baseElement&&(lm.c.baseElement=document.querySelector(lm.c.baseElement),lm.c.baseElement||lm.clError("The element setted to 'baseElement' doesn't exist.")),"number"!=typeof lm.c.itemsInit&&lm.clError("The itemsInit property must be of number type."),"number"!=typeof lm.c.itemsPerLoad&&lm.clError("The itemsPerLoad property must be of number type."),"string"!=typeof lm.c.data&&"object"!=typeof lm.c.data&&lm.clError("The data property must be of number type or string type(url)."),"string"==typeof lm.c.data&&-1==lm.c.data.search("http")){var e=document.location;lm.c.data=e+"/"+lm.c.data}},initConfigs:function(){lm.loadMore({},lm.c.itemsInit),lm.insertOns()},getArray:function(){return"object"==typeof lm.c.data?(lm.i.data=lm.c.data,lm.initConfigs(),!0):void lm.i.getJSON(lm.c.data,function(e){lm.i.data=e,lm.initConfigs()},function(){lm.clError("Couldn't get the data of the file: "+lm.c.data)})},createBaseElement:function(){lm.i.baseElement=lm.c.baseElement.cloneNode(!0),lm.i.baseElement.removeAttribute("id"),lm.c.baseElement.remove()},insertNewValuesOnHTML:function(e){lm.c.el.innerHTML+=e,0==this.i.remainderData.length&&lm.c.onCompleted()},insertOns:function(){return lm.c.elementForLoad&&""!=lm.c.elementForLoad?void(lm.c.elementForLoad.onclick=function(){lm.loadMore(),lm.c.onClickForLoad()}):!1},loadMore:function(e,t,n){var o=void 0==this.i.remainderData?this.i.data:this.i.remainderData,r=document.createElement("div");if(void 0==o||"object"!=typeof o)return!1;if(0==o.length)return!1;(void 0==e||"object"!=typeof e)&&(e={}),(void 0==t||"number"!=typeof t)&&(t=lm.c.itemsPerLoad),(void 0==n||"number"!=typeof n)&&(n=lm.c.minDelay);var l;if(Object.keys(e).length>0){var a=lm.sF.search(o,e);l=-1!=a?a:o}else l=o;for(var i=[],m=0;t>m;m++){var c=l[m];i.push(c);var s=this.i.replacer.split("%s%"),d=lm.i.baseElement.cloneNode(!0),u=d.innerHTML,f=d.attributes;for(var p in c){var h=s[0]+p+s[1];u=u.replace(new RegExp(h,"g"),c[p]);for(var b=0;b<f.length;b++){var y=f[b].nodeName,v=f[b].value;-1!=v.search(h)&&d.setAttribute(y,c[p])}}d.innerHTML=u,r.appendChild(d)}this.i.remainderData=lm.sF.severalSplice(o,i),setTimeout(function(){1==lm.c.autoAddition&&lm.insertNewValuesOnHTML(r.innerHTML,l.length);for(var e=[],n=lm.c.el.childNodes.length-1;n>=lm.c.el.childNodes.length-t;n--){var o=lm.c.el.childNodes[n];e.push(o)}var a=e;lm.c.onLoad(a)},n)},clError:function(e){throw new Error("loadMore - "+e)}};classLm.prototype.loadMore=function(e,t,n){"object"!=typeof this.i.data?this.i.getJSON(this.i.data,function(o){this.i.data=o,lm.loadMore(e,t,n)},function(){console.error("loadMore - Couldn't get the data of the file: "+this.i.data)}):lm.loadMore(e,t,n)};
